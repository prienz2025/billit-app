name: Slack Notification

on:
  pull_request:
    types:
      - opened
      - closed
      - synchronize
    branches:
      - main

jobs:
  slack_nofitication:
    runs-on: ubuntu-latest
    steps:
      - name: Send Slack Notification on PR Opened
        if: github.event.action == 'opened'
        uses: 8398a7/action-slack@v3
        with:
          status: success
          author_name: 'bannabe-app'
          fields: repo,eventName,ref,workflow,job
          text: "ğŸš€ *ìƒˆë¡œìš´ PRì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!* \nğŸ‘¤ *ì‘ì„±ì:* `${{ github.event.pull_request.user.login }}`\nğŸ“Œ *ì œëª©:* `${{ github.event.pull_request.title }} (#${{ github.event.pull_request.number }})` \nğŸ”— *[PR í™•ì¸í•˜ê¸°]:* ${{ github.event.pull_request.html_url }}"
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Send Slack Notification on PR Updated (New Commit)
        if: github.event.action == 'synchronize'
        uses: 8398a7/action-slack@v3
        with:
          status: success
          author_name: 'bannabe-app'
          fields: repo,eventName,ref,workflow,job
          text: "ğŸ“ *PRì— ìƒˆë¡œìš´ Commitì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!* \nğŸ‘¤ *ì‘ì„±ì:* `${{ github.event.pull_request.user.login }}`\nğŸ“Œ *ì œëª©:* `${{ github.event.pull_request.title }} (#${{ github.event.pull_request.number }})` \nğŸ”— *[PR í™•ì¸í•˜ê¸°]:* ${{ github.event.pull_request.html_url }}"
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Send Slack Notification on PR Merged
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: 8398a7/action-slack@v3
        with:
          status: success
          author_name: 'bannabe-app'
          fields: repo,eventName,ref,workflow,job
          text: "ğŸ‰ *PRì´ Mergeë˜ì—ˆìŠµë‹ˆë‹¤!* \nğŸ‘¤ *ì‘ì„±ì:* `${{ github.event.pull_request.user.login }}`\nâœ… *Mergeí•œ ì‚¬ëŒ:* `${{ github.actor }}`\nğŸ“Œ *ì œëª©:* `${{ github.event.pull_request.title }} (#${{ github.event.pull_request.number }})` \nğŸ”— *[Merge PR í™•ì¸í•˜ê¸°]*: ${{ github.event.pull_request.html_url }}"
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
